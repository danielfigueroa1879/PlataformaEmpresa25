const questionsByCategory = {
    "CONOCIMIENTOS LEGALES": [
        { question: "La labor b√°sica de los Guardias de Seguridad es brindar personalmente seguridad y protecci√≥n a bienes, personas e instalaciones.", correctAnswer: "Verdadero" },
        { question: "Cualquier persona puede ser detenida cuando hay sospecha de que cometi√≥ un delito.", correctAnswer: "Falso" },
        { question: "La existencia de la leg√≠tima defensa como justificaci√≥n de un hecho, es determinada por la polic√≠a.", correctAnswer: "Falso" },
        { question: "Es obligatorio para cada lugar donde se desempe√±en Guardias de Seguridad, la existencia de una Directiva de Funcionamiento debidamente autorizada por la Comisar√≠a del sector jurisdiccional.", correctAnswer: "Verdadero" },
        { question: "Solamente durante la noche los Guardias de Seguridad pueden usar armas de fuego.", correctAnswer: "Falso" },
        { question: "La honra y dignidad de la persona es un derecho constitucional.", correctAnswer: "Verdadero" },
        { question: "La Constituci√≥n Pol√≠tica de la Rep√∫blica establece la igualdad de las personas.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad puede ejercer sus funciones hasta el frontis de la instalaci√≥n resguardada.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad en el cumplimiento de sus funciones deber√° usar una tenida uniforme determinada por la Directiva de Funcionamiento que ha sido aprobada por la Prefectura de Carabineros respectiva.", correctAnswer: "Verdadero" },
        { question: "En el CUASIDELITO existe la culpa.", correctAnswer: "Verdadero" },
        { question: "El que sin derecho encerrare o detuviere a otro priv√°ndole de su libertad, comete el delito de secuestro.", correctAnswer: "Verdadero" },
        { question: "La Constituci√≥n nos garantiza el derecho a la vida y la libertad.", correctAnswer: "Verdadero" },
        { question: "Son cl√°usulas prohibidas en un contrato de trabajo, todas aquellas que implican la renuncia a derechos otorgados por las leyes laborales.", correctAnswer: "Verdadero" },
        { question: "El delito es toda acci√≥n u omisi√≥n voluntaria penada por la Ley.", correctAnswer: "Verdadero" },
        { question: "El contrato de trabajo es consensual y deber√° ser extendido por escrito, dentro del plazo de 5 d√≠as de incorporado el trabajador y firmados por ambas partes, en dos ejemplares.", correctAnswer: "Verdadero" },
        { question: "En el sistema de vigilancia privada vigente, s√≥lo los Guardias de Seguridad, est√°n sujetos a la Fiscalizaci√≥n de la Autoridad Fiscalizadora de la prefectura de Carabineros de su sector jurisdiccional.", correctAnswer: "Falso" },
        { question: "El Guardia de Seguridad es un polic√≠a pagado por los privados.", correctAnswer: "Falso" },
        { question: "El Guardia de Seguridad act√∫a en las calles cerradas.", correctAnswer: "Falso" },
        { question: "Toda entidad bancaria debe tener equipo de filmaci√≥n funcionando durante la atenci√≥n de p√∫blico.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad debe contar con seguro de vida un m√≠nimo de 75 UF.", correctAnswer: "Verdadero" },
        { question: "Las personas autorizadas por la ley para privar de libertad son los agentes de seguridad, Carabineros de Chile y la Polic√≠a de Investigaciones.", correctAnswer: "Falso" },
        { question: "Los encubridores, autores, c√≥mplices y v√≠ctimas son responsables de los delitos.", correctAnswer: "Falso" },
        { question: "Solamente los Guardias de Seguridad, nocheros y porteros deben capacitarse y no as√≠ los rondines.", correctAnswer: "Falso" },
        { question: "En el sitio del suceso el Guardia de Seguridad debe permitir el libre ingreso al lugar de curiosos.", correctAnswer: "Falso" },
        { question: "Existe legitima defensa si la agresi√≥n es ilegitima y actual y no existe otro medio para defenderse.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad s√≥lo puede detener a los delincuentes.", correctAnswer: "Falso" },
        { question: "Todo Guardia de Seguridad debe efectuar un curso de capacitaci√≥n y portar su tarjeta de identificaci√≥n otorgada por la Autoridad Fiscalizadora respectiva.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad solamente puede detener y allanar al delincuente flagrante.", correctAnswer: "Falso" },
        { question: "Ante un delito flagrante el Guardia de Seguridad est√° facultado para detener por sospecha.", correctAnswer: "Falso" },
        { question: "El Guardia de Seguridad esta autorizado para ejercer en la v√≠a p√∫blica conforme al art. 13 del D.S:93.", correctAnswer: "Falso" },
        { question: "La directiva de funcionamiento es un documento que debe confeccionar la empresa y acreditarlo ante la Autoridad Fiscalizadora.", correctAnswer: "Verdadero" },
        { question: "Las oficinas de seguridad privada operan en las respectivas Prefecturas de Carabineros como Autoridades Fiscalizadoras.", correctAnswer: "Verdadero" },
        { question: "En el delito de hurto no encontramos ni fuerza en las cosas ni violencia ni intimidaci√≥n en las personas.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad puede portar armas de fuego cuando su empleador se lo permita.", correctAnswer: "Falso" },
        { question: "Delito es toda acci√≥n u omisi√≥n culpable penada por la Ley.", correctAnswer: "Verdadero" },
        { question: "Los delitos que generalmente se cometen en los supermercados son definidos tipificados como hurtos o faltas.", correctAnswer: "Verdadero" }
    ],

    "PRIMEROS AUXILIOS": [
        { question: "El objetivo b√°sico de otorgar primeros auxilios es s√≥lo establecer la identificaci√≥n de la causa del da√±o que afecta al accidentado.", correctAnswer: "Falso" },
        { question: "Ante un traumatismo tor√°cico, lo primordial es inmovilizar el cuello para evitar un da√±o a la columna vertebral.", correctAnswer: "Falso" },
        { question: "Existen las hemorragias capilares, venosas y subjuntivas.", correctAnswer: "Falso" },
        { question: "Un hematoma se produce cuando hay fractura expuesta.", correctAnswer: "Falso" },
        { question: "Lo m√°s importante en un parto es sacar al ni√±o y pegarle una palmada para ver si esta vivo.", correctAnswer: "Falso" },
        { question: "Los primeros auxilios que se deben prestar a una persona con paro cardiaco es levantar los pies para la mejor circulaci√≥n.", correctAnswer: "Falso" },
        { question: "En las luxaciones encontramos discontinuidad de una pieza √≥sea o hueso.", correctAnswer: "Falso" },
        { question: "Frente a un estado de schock debemos dejar que el accidentado duerma, para as√≠ lograr que se recupere de mejor forma.", correctAnswer: "Falso" },
        { question: "Los primeros auxilios a una persona con paro cardiaco es efectuar masaje cardiaco.", correctAnswer: "Verdadero" },
        { question: "La atenci√≥n de primeros auxilios a una persona fracturada es efectuar masaje.", correctAnswer: "Falso" },
        { question: "La atenci√≥n de primeros auxilios a una persona fracturada es efectuar un masaje cardiaco.", correctAnswer: "Falso" },
        { question: "Podemos distinguir las hemorragias venosas cuando la sangre brota sin fuerza y tiene un tono rojo oscuro.", correctAnswer: "Verdadero" },
        { question: "El botiqu√≠n de primeros auxilios es primordial en una instalaci√≥n.", correctAnswer: "Verdadero" },
        { question: "La atenci√≥n de primeros auxilios a una persona fracturada es efectuar un torniquete.", correctAnswer: "Falso" },
        { question: "La atenci√≥n de primeros auxilios a una persona fracturada es elevar las extremidades inferiores.", correctAnswer: "Falso" },
        { question: "La atenci√≥n de primeros auxilios a una persona fracturada es la inmovilizaci√≥n de la zona afectada.", correctAnswer: "Verdadero" },
        { question: "Frente a una hemorragia arterial se debe comprimir el punto venoso m√°s cercano a la herida.", correctAnswer: "Falso" },
        { question: "De acuerdo a los principios de los primeros auxilios, no importa qui√©n los aplica √©stos, con tal de atender al afectado.", correctAnswer: "Falso" },
        { question: "El traumatismo enc√©falo craneano puede ser abierto o cerrado.", correctAnswer: "Verdadero" },
        { question: "Frente a un parto normal debemos tomar al reci√©n nacido de la cabeza y expulsarlo para que salga m√°s r√°pido.", correctAnswer: "Falso" },
        { question: "El uso del torniquete s√≥lo se aplica en casos extremos, debiendo contenerse la presi√≥n sangu√≠nea por no m√°s de 5 minutos, soltando 30 segundos.", correctAnswer: "Verdadero" },
        { question: "Las hemorragias pueden ser venosas y arteriales.", correctAnswer: "Verdadero" },
        { question: "No pueden producirse quemaduras con elementos como qu√≠micos √°cidos.", correctAnswer: "Falso" },
        { question: "Los primeros auxilios a una persona con paro cardiaco es efectuar respiraci√≥n boca a boca.", correctAnswer: "Verdadero" }
    ],

    "PROTECCI√ìN DE INSTALACIONES": [
        { question: "Dentro de las funciones b√°sicas de un vigilante privado y/o guardia de seguridad est√° la de desempe√±ar la protecci√≥n de las personas tanto dentro como fuera de los recintos e instalaciones de la empresa.", correctAnswer: "Falso" },
        { question: "Cuando sea visitada la empresa por personal externo, b√°sicamente se deben efectuar los siguientes procedimientos: identificaci√≥n de la visita, solicitar con qui√©n se va a entrevistar, dejar constancia en el libro de registro respectivo.", correctAnswer: "Verdadero" },
        { question: "Las rondas un control m√≥vil superficial de √°reas, realizadas con una frecuencia m√°s o menos regular.", correctAnswer: "Verdadero" },
        { question: "Los tipos de fuego son A,B y C.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad debe utilizar psicolog√≠a para enfrentar situaciones dif√≠ciles.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad es una barrera animal.", correctAnswer: "Falso" },
        { question: "Inspecci√≥n de seguridad, consiste en controles sorpresivos del cumplimiento de las medidas y disposiciones de seguridad, emanadas del Estudio de Seguridad, Planes Manuales y/o Directiva de Funcionamiento.", correctAnswer: "Verdadero" },
        { question: "Seguridad de instalaciones involucra entre otras; protecci√≥n de edificios, custodia de dependencias, protecci√≥n de recintos donde las personas trabajan.", correctAnswer: "Verdadero" },
        { question: "El perro constituye una barrera natural.", correctAnswer: "Falso" },
        { question: "El sitio del suceso corresponde al lugar donde el Guardia de Seguridad presta servicios.", correctAnswer: "Falso" },
        { question: "Los accidentes se originan cuando se sobrepasan las vulnerabilidades.", correctAnswer: "Verdadero" },
        { question: "El factor sorpresa esta considerado como una vulnerabilidad.", correctAnswer: "Verdadero" },
        { question: "Dentro de los tipos de barreras tenemos las sonoras que est√°n constituidos funcionalmente por perros adiestrados y destinados a anunciar la presencia de los extra√±os.", correctAnswer: "Verdadero" },
        { question: "Dentro de los tipos de barreras podemos destacar: naturales, artificiales, humanas, animales y de energ√≠a.", correctAnswer: "Verdadero" },
        { question: "La prevenci√≥n est√° orientada fundamentalmente a actuar sobre el origen o causas de los accidentes, a fin de evitar los da√±os.", correctAnswer: "Verdadero" },
        { question: "La seguridad privada es la que se ejerce en privado.", correctAnswer: "Falso" },
        { question: "Ante un asalto, el Guardia de Seguridad, siempre enfrentar√° el factor sorpresa con que act√∫en los delincuentes.", correctAnswer: "Verdadero" },
        { question: "La seguridad personal, es el conjunto de acciones, actitudes e ideas que propenden a proteger principalmente los edificios, dependencias o recintos.", correctAnswer: "Falso" },
        { question: "Dentro de la clasificaci√≥n de personas podemos indicar entre otros: El sexo, raza, edad, estatura, figura, etc.", correctAnswer: "Verdadero" },
        { question: "Vulnerabilidades que pueden afectar la seguridad son: el sabotaje o intento de este, el robo, la deslealtad funcionaria, comentarios tendenciosos.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad es una barrera artificial.", correctAnswer: "Falso" },
        { question: "Las barreras se clasifican en: Naturales, Artificiales, Animales y Humanas.", correctAnswer: "Verdadero" },
        { question: "Un cerro o una cordillera es una barrera artificial.", correctAnswer: "Falso" },
        { question: "Entre otros actos encontramos algunos que no atentan contra la seguridad como el sabotaje o intento de este, la apropiaci√≥n, la deslealtad funcionaria y los comentarios tendenciosos.", correctAnswer: "Falso" },
        { question: "Dentro de los sentidos de la observaci√≥n podemos mencionar: vista, o√≠do, tacto, olfato y gusto.", correctAnswer: "Verdadero" },
        { question: "Dentro del control de accesos tenemos √°reas de responsabilidad y cumplimiento denominadas: Restringidas y Prohibidas.", correctAnswer: "Verdadero" },
        { question: "Las barreras se definen como obst√°culos que se interponen entre el delincuente y lo que se desea proteger.", correctAnswer: "Verdadero" },
        { question: "Las barreras se clasifican solamente en, alumbrado de per√≠metro y perros adiestrados.", correctAnswer: "Falso" },
        { question: "El objetivo b√°sico del control de acceso es regular el egreso de personas y elementos del recinto a cargo del personal de vigilante privados y/o guardias de seguridad.", correctAnswer: "Falso" },
        { question: "Ante una amenaza de instalaci√≥n de artefacto explosivo no se debe tocar o mover nada.", correctAnswer: "Verdadero" },
        { question: "El asaltante se caracteriza por actuar sin planificaci√≥n alguna.", correctAnswer: "Falso" },
        { question: "S√≥lo el Jefe de Seguridad de una empresa debe conocer los planes de emergencia de √©sta, para que no se divulguen entre el personal de la instalaci√≥n.", correctAnswer: "Falso" },
        { question: "El prevenir se logra estando atento al servicio, controlar y fiscalizar al m√°ximo las medidas de seguridad de la empresa.", correctAnswer: "Verdadero" },
        { question: "Dentro de los tipos de barreras se cuentan las artificiales.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad es una barrera artificial pasiva.", correctAnswer: "Falso" }
    ],

    "CONOCIMIENTOS DE SISTEMAS DE ALARMA": [
        { question: "Para detectar un incendio existen detectores de temperatura y de humo.", correctAnswer: "Verdadero" },
        { question: "Para proyectar un buen sistema de detecci√≥n se debe considerar, que este s√≥lo suene fuerte.", correctAnswer: "Falso" },
        { question: "Para una adecuada detecci√≥n de incendios deben existir mangueras adecuadas y grifos cercanos.", correctAnswer: "Falso" },
        { question: "El circuito cerrado de televisi√≥n lo debemos considerar, que esta destinado al reemplazo total de Guardias de Seguridad.", correctAnswer: "Falso" },
        { question: "Las alarmas solo se activan en caso de incendio y sospechosas de robo y hurto.", correctAnswer: "Falso" },
        { question: "El extintor se utiliza para amagar un fuego.", correctAnswer: "Verdadero" },
        { question: "El circuito cerrado de televisi√≥n es un sistema apropiado s√≥lo para √°reas de dif√≠cil observaci√≥n.", correctAnswer: "Falso" },
        { question: "Alarma es un elemento que sirve para advertir el peligro, s√≥lo en casos de delitos flagrantes.", correctAnswer: "Falso" },
        { question: "Se puede contar entre otras alarmas los siguientes tipos: transceptores y tel√©fonos.", correctAnswer: "Falso" },
        { question: "Los polvos qu√≠micos de los extintores se clasifican en tipo, ABC, BC, CO2.", correctAnswer: "Verdadero" },
        { question: "Los medios de comunicaci√≥n deben ser ocupados ante reales necesidades en forma ambigua y entregando en forma detallada los antecedentes.", correctAnswer: "Falso" },
        { question: "Los sensores son elementos que se activan, permitiendo percibir una determinada se√±al.", correctAnswer: "Verdadero" },
        { question: "Un sistema de alarmas debe tener etapas b√°sicas, detecci√≥n, control y respuesta.", correctAnswer: "Verdadero" },
        { question: "Las alarmas son elementos manuales o el√©ctricos que se utilizan para advertir peligro de intrusi√≥n o de incendio.", correctAnswer: "Verdadero" },
        { question: "Las condiciones b√°sicas de un sistema electr√≥nico de alarma son: facilidad de instalaci√≥n, facilidad operacional, costo, caracter√≠sticas de funcionamiento, caracter√≠sticas el√©ctricas, instalaci√≥n segura,capacitaci√≥n y mantenimiento y respaldo.", correctAnswer: "Verdadero" },
        { question: "El uso indebido de los medios t√©cnicos y la mala manipulaci√≥n de artefactos producen fallas t√©cnicas.", correctAnswer: "Verdadero" },
        { question: "El circuito cerrado de televisi√≥n es un complemento al sistema electr√≥nico de alarma.", correctAnswer: "Verdadero" },
        { question: "El pulsador inal√°mbrico es aquel que opera a control remoto.", correctAnswer: "Verdadero" },
        { question: "Fuego de grandes proporciones es donde se quema lo que no est√° destinado a arder.", correctAnswer: "Verdadero" }
    ],

    "VALORES Y √âTICA": [
        { question: "La tolerancia es fundamental en la convivencia laboral.", correctAnswer: "Verdadero" },
        { question: "A veces es necesario mentir para salir de alg√∫n problema.", correctAnswer: "Falso" },
        { question: "El cumplimento y esp√≠ritu de cuerpo se mide, presentando y censurando aquellas actitudes err√≥neas de todos los que integran un sistema de seguridad.", correctAnswer: "Verdadero" },
        { question: "Las comunicaciones interpersonales adecuadas constituyen una herramienta fundamental para lograr un ambiente positivo en las relaciones humanas del personal de seguridad.", correctAnswer: "Verdadero" },
        { question: "La honestidad es una habilidad para enga√±ar a los dem√°s sin crear ofensa.", correctAnswer: "Falso" },
        { question: "El subordinado debe darle cumplimiento a las ordenes, no importando las circunstancias.", correctAnswer: "Falso" },
        { question: "La educaci√≥n y la cultura no tiene importancia en la labor del Guardia de Seguridad.", correctAnswer: "Falso" },
        { question: "Los roces dentro del sistema de vigilancia, constituyen una vulnerabilidad pues afectan el aspecto t√©cnico operativo de la empresa protegida.", correctAnswer: "Verdadero" },
        { question: "El valor, el coraje, la osad√≠a y la desverg√ºenza son elementos para mantener la moral al personal de seguridad.", correctAnswer: "Falso" },
        { question: "La presentaci√≥n personal de seguridad, no tiene incidencia en el servicio.", correctAnswer: "Falso" },
        { question: "Para un desempe√±o eficiente, el Guardia de Seguridad debe considerar, ser eficaz en el trabajo, que es una profesi√≥n importante, que se debe conocer completamente sus funciones.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad es la cara visible de la empresa.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad no le debe importar el respeto por el p√∫blico en general.", correctAnswer: "Falso" },
        { question: "La honestidad es la obligaci√≥n moral m√°s grande.", correctAnswer: "Verdadero" },
        { question: "El trabajo arm√≥nico, conlleva entre otras una adecuada convivencia y un buen rendimiento.", correctAnswer: "Verdadero" },
        { question: "Es obligaci√≥n del Guardia de Seguridad el desplegar iniciativa solamente ante eventuales riesgos o delitos.", correctAnswer: "Falso" },
        { question: "La motivaci√≥n inadecuada de un Guardia de Seguridad puede ser origen de accidentes.", correctAnswer: "Verdadero" },
        { question: "La √©tica profesional es aquella que trata de la moral y de las obligaciones del hombre.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad es la imagen corporativa de la empresa.", correctAnswer: "Verdadero" },
        { question: "Vocaci√≥n: es la disposici√≥n a ejercer determinadas tareas, es dedicarse a lo que se considera que tiene especial disposici√≥n.", correctAnswer: "Verdadero" },
        { question: "La moral es la capacidad del ser humano para distinguir entre lo bueno y lo malo.", correctAnswer: "Verdadero" },
        { question: "La Etica es la parte de la filosof√≠a que trata de la moral que debe observar una persona.", correctAnswer: "Verdadero" },
        { question: "Seg√∫n el concepto de √©tica podemos afirmar que es el coraje del hombre.", correctAnswer: "Falso" },
        { question: "Un Guardia de Seguridad debe poseer y exhibir cualidades como, tacto y criterio, cortes√≠a y seguridad de s√≠ mismo, car√°cter firme y lenguaje adecuado, buenos modales.", correctAnswer: "Verdadero" },
        { question: "El respeto en el lugar de trabajo no siempre es necesario.", correctAnswer: "Falso" },
        { question: "El Guardia de Seguridad y la empresa se deben a sus clientes.", correctAnswer: "Verdadero" },
        { question: "Los valores √©ticos y morales se dan en el ser humano por su capacidad de razonar y discernir.", correctAnswer: "Verdadero" },
        { question: "La existencia del rumor es primordial para crear un ambiente laboral con buenas relaciones humanas.", correctAnswer: "Falso" },
        { question: "Actuar con tino significa hacerlo con acierto, con buen juicio, para resolver un problema.", correctAnswer: "Verdadero" },
        { question: "De acuerdo a las acciones √©ticas que cumplen los Guardias de Seguridad se requiere de adecuados elementos como linternas, pito y esposas.", correctAnswer: "Falso" },
        { question: "La persona que trabaja en la instalaci√≥n siempre confiar√° en el Guardia de Seguridad como una persona de buenas costumbre y adem√°s capacitada en situaciones de emergencias.", correctAnswer: "Verdadero" },
        { question: "El valor para enfrentar los riesgos profesionales es sin√≥nimo de ser temerario.", correctAnswer: "Falso" },
        { question: "El concepto de autoridad, es necesario que una persona imponga a otra una determinaci√≥n de manera obligatoria.", correctAnswer: "Verdadero" },
        { question: "Lo fundamental en la tarea del Guardia de Seguridad es demostrar diariamente su compromiso con la tarea de seguridad que asumido.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad adem√°s de su condici√≥n de tal, debe demostrar sus virtudes personales como f√≥rmula exacta para el enriquecimiento de su actuar.", correctAnswer: "Verdadero" },
        { question: "El Guardia de Seguridad debe ser, moderado en su actuar, esto es una muestra de auto control o autodisciplina.", correctAnswer: "Verdadero" },
        { question: "Por rigurosas que sean las normas o procedimientos de control, debe existir amabilidad, deferencia, una actitud cort√©s y adecuada, por neutralizar el rechazo que dichas normas.", correctAnswer: "Verdadero" }
    ],

    "SISTEMAS DE COMUNICACI√ìN Y ENLACE": [
        { question: "Respecto a una consulta telef√≥nica, no se debe gastar a tiempo en verificaciones, para evitar mantener ocupada la l√≠nea.", correctAnswer: "Falso" },
        { question: "Tel√©fono es un elemento de comunicaci√≥n, que nunca se debe utilizar porque es vulnerable.", correctAnswer: "Falso" },
        { question: "El fax dentro del sistema de comunicaci√≥n y enlace, lo podemos definir como un equipo codificador y decodificador de relativa seguridad en su emisi√≥n.", correctAnswer: "Verdadero" },
        { question: "El contacto magn√©tico se usa para detectar humo.", correctAnswer: "Falso" },
        { question: "Las fallas m√°s comunes de los sistemas de alarmas pueden ser fallas de circuito, fallas de computador, fallas humanas.", correctAnswer: "Verdadero" },
        { question: "Las claves de lo sistemas radiales de los Guardias de Seguridad pueden copiar las claves de los Servicios de Emergencia Ambulancias, Bomberos, Carabineros.", correctAnswer: "Falso" },
        { question: "Dentro de los elementos de un sistema de enlace, se cuentan los transceptores, los cuales deben poseer una frecuencia conectada a Carabineros.", correctAnswer: "Falso" },
        { question: "Los sistemas de alarmas son m√©todos de protecci√≥n de las personas y bienes.", correctAnswer: "Verdadero" },
        { question: "Los servicios de equipos radiales son autorizados y fiscalizados por la Subsecretar√≠a de Telecomunicaciones.", correctAnswer: "Verdadero" },
        { question: "Las comunicaciones radiales entre una empresa de Seguridad y otra instituci√≥n pueden realizarse a trav√©s de la misma frecuencia.", correctAnswer: "Falso" },
        { question: "Las comunicaciones del personal de Guardia de Seguridad no deben observar el conducto regular que exista en cada empresa, para agilizar el sistema.", correctAnswer: "Falso" },
        { question: "Ante un llamado an√≥nimo que anuncie colocaci√≥n de un artefacto explosivo, se debe cortar r√°pidamente la llamada, para evitar la comunicaci√≥n.", correctAnswer: "Falso" },
        { question: "A toda persona ajena a la empresa se les proporcionar√° antecedentes relacionados con el funcionamiento de guardias o vigilancia, s√≥lo cuando se requiera por escrito.", correctAnswer: "Falso" },
        { question: "Las comunicaciones por el fax deben ser breves y bien concretas, en beneficio del tiempo.", correctAnswer: "Verdadero" },
        { question: "Al activar un sistema de alarma de incendios no se debe evacuar el p√∫blico desde la instalaci√≥n amagada.", correctAnswer: "Falso" }
    ],

    "PREVENCI√ìN Y CONTROL DE EMERGENCIA": [
        { question: "INFLAMABLES Sustancias que a alta temperatura ambiente desprenden vapores que, mezclados con el aire, pueden arder en presencia de una fuente de calor.", correctAnswer: "Falso" },
        { question: "Los grifos son de costo m√°s alto y prestan una m√°s deficiente acci√≥n por las largas tiras de mangueras y gran cantidad de extintores manuales que se deben emplear.", correctAnswer: "Falso" },
        { question: "Si las medidas preventivas no han sido suficientes y se produce el delito, el Guardia de Seguridad deber√° mantener una actitud calmada, serena y de sangre fr√≠a, con el fin de que su actitud sirva de modelo para el personal y p√∫blico presente en el recinto.", correctAnswer: "Verdadero" },
        { question: "Se recomienda que en toda llamada an√≥nima que el receptor no trate de establecer el n√∫mero de tel√©fono que llama; no tratar de identificar a la persona que realiza la llamada.", correctAnswer: "Falso" },
        { question: "Evacuaci√≥n: Es un sistema que se aplica en una Empresa u Organizaci√≥n, para ingresar aun lugar, sitio, √°rea o dependencia que se encuentra amagado por una situaci√≥n de emergencia, temporal o permanente, que en forma organizada, met√≥dica o coordinada, permita evitar da√±os a la integridad f√≠sica de las personas y, cuando proceda, resguardar ciertos bienes.", correctAnswer: "Falso" },
        { question: "Ante una emergencia, es preciso tener presente algunas recomendaciones como: No utilizar ascensores. (Personas atrapadas - efecto chimenea), En caso de alarma, suspender trabajos y efectuar cortes de energ√≠a. No tratar de volver al lugar habitual de trabajo, en caso de encontrarse lejos, y seguir instrucciones del lugar donde se encuentren.", correctAnswer: "Verdadero" },
        { question: "INFLAMABLES Sustancias que a la temperatura ambiente normal desprenden vapores que, mezclados con el aire, pueden arder en presencia de una fuente de calor.", correctAnswer: "Verdadero" }
    ],

    "PREGUNTAS ADICIONALES": [
        { question: "La Autoridad Fiscalizadora de la Seguridad Privada en Chile es la Prefectura de Carabineros de Chile del sector.", correctAnswer: "Verdadero" },
        { question: "La Ley N¬∞ 21.659, publicada en marzo de 2024, es la √∫nica ley que regula la seguridad privada en Chile actualmente.", correctAnswer: "Falso" },
        { question: "Uno de los requisitos para ser Guardia de Seguridad seg√∫n el Decreto 93 es tener 18 a√±os.", correctAnswer: "Verdadero" },
        { question: "Los Guardias de Seguridad est√°n autorizados para portar armas de fuego en el ejercicio de sus funciones seg√∫n el Decreto 93.", correctAnswer: "Falso" },
        { question: "El curso de formaci√≥n para Guardia de Seguridad, seg√∫n el Decreto 93, tiene una duraci√≥n de 90 horas.", correctAnswer: "Verdadero" }
    ]
};

let questions = [];
let userAnswers = {};

function shuffleArray(array) {
    const shuffled = [...array];
    for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
    }
    return shuffled;
}

function createCategorizedQuestions() {
    const allQuestions = [];
    const categories = Object.keys(questionsByCategory);
    
    categories.forEach(category => {
        const categoryQuestions = questionsByCategory[category];
        const shuffledCategoryQuestions = shuffleArray([...categoryQuestions]);
        
        let questionsToTake;
        switch(category) {
            case "CONOCIMIENTOS LEGALES":
                questionsToTake = 8;
                break;
            case "PRIMEROS AUXILIOS":
                questionsToTake = 7;
                break;
            case "PROTECCI√ìN DE INSTALACIONES":
                questionsToTake = 8;
                break;
            case "CONOCIMIENTOS DE SISTEMAS DE ALARMA":
                questionsToTake = 5;
                break;
            case "VALORES Y √âTICA":
                questionsToTake = 7;
                break;
            case "SISTEMAS DE COMUNICACI√ìN Y ENLACE":
                questionsToTake = 5;
                break;
            case "PREVENCI√ìN Y CONTROL DE EMERGENCIA":
                questionsToTake = 7;
                break;
            case "PREGUNTAS ADICIONALES":
                questionsToTake = 3;
                break;
            default:
                questionsToTake = 3;
        }
        
        for (let i = 0; i < Math.min(questionsToTake, shuffledCategoryQuestions.length); i++) {
            allQuestions.push({
                ...shuffledCategoryQuestions[i],
                category: category
            });
        }
    });
    
    return shuffleArray(allQuestions);
}

function showCategoryStats(questions, userAnswers) {
    const categoryStats = {};
    
    questions.forEach((question, index) => {
        const category = question.category;
        if (!categoryStats[category]) {
            categoryStats[category] = { total: 0, correct: 0 };
        }
        categoryStats[category].total++;
        
        if (userAnswers[index] === question.correctAnswer) {
            categoryStats[category].correct++;
        }
    });
    
    return categoryStats;
}

// FUNCI√ìN PRINCIPAL CORREGIDA: Genera preguntas categorizadas
function generateQuestionsCategorized() {
    console.log("generateQuestionsCategorized function called.");
    
    // Buscar elementos tanto en p√°gina p√∫blica como privada
    const quizContainer = document.getElementById('quiz-container');
    const startExamBtn = document.getElementById('start-exam-btn');
    const submitQuizBtn = document.getElementById('submit-quiz-btn');
    const examSection = document.getElementById('exam-section');
    const subtleResponseBox = document.getElementById('subtle-response-box');

    if (!quizContainer) {
        console.error('No se encontr√≥ el contenedor del quiz');
        return;
    }

    // Mostrar mensaje de carga
    quizContainer.innerHTML = '<p class="text-center text-info"><span class="spinner-border text-info" role="status"></span> Generando preguntas categorizadas...</p>';
    quizContainer.style.display = 'block';
    
    if (startExamBtn) startExamBtn.style.display = 'none';
    if (submitQuizBtn) submitQuizBtn.style.display = 'none';

    // Activar borde rojo persistente
    if (examSection) {
        examSection.classList.add('active-red-border');
    }

    // Mostrar mensaje sutil
    if (subtleResponseBox) { 
        subtleResponseBox.style.display = 'block';
        subtleResponseBox.classList.add('show');
        subtleResponseBox.textContent = '¬°Generando preguntas categorizadas, por favor espera!';
    }

    // Simular tiempo de carga y generar preguntas
    setTimeout(() => {
        questions = createCategorizedQuestions();
        userAnswers = {};
        
        displayCategorizedQuiz(questions);
        
        if (subtleResponseBox) {
            subtleResponseBox.textContent = '¬°50 preguntas categorizadas cargadas! Ver√°s preguntas de todas las materias. Una vez que selecciones una respuesta, no podr√°s cambiarla. ¬°Mucha suerte!';
            setTimeout(() => {
                subtleResponseBox.classList.remove('show');
                setTimeout(() => subtleResponseBox.style.display = 'none', 500);
            }, 4000);
        }
    }, 1000);
}

// FUNCI√ìN PRINCIPAL CORREGIDA: Muestra el quiz categorizado
function displayCategorizedQuiz(questions) {
    const quizContainer = document.getElementById('quiz-container');
    if (!quizContainer) {
        console.error('No se encontr√≥ el contenedor del quiz para mostrar las preguntas');
        return;
    }
    
    quizContainer.innerHTML = '';
    
    questions.forEach((q, index) => {
        const questionCard = document.createElement('div');
        questionCard.classList.add('question-card');
        
        const categoryBadge = getCategoryBadge(q.category);
        
        questionCard.innerHTML = `
            <div class="category-badge-container mb-2">
                ${categoryBadge}<br>
            </div>
            <h5 class="question-text">${index + 1}. ${q.question}</h5>
            <div class="options-container">
                <label class="option-button" data-question="${index}" data-value="Verdadero">
                    <input class="form-check-input" type="radio" name="question${index}" value="Verdadero" style="display: none;">
                    Verdadero
                </label>
                <label class="option-button" data-question="${index}" data-value="Falso">
                    <input class="form-check-input" type="radio" name="question${index}" value="Falso" style="display: none;">
                    Falso
                </label>
            </div>
            <div class="feedback-message mt-2" style="font-weight: 600; display: none;"></div>
        `;
        quizContainer.appendChild(questionCard);

        const optionButtons = questionCard.querySelectorAll('.option-button');
        optionButtons.forEach(button => {
            button.addEventListener('click', function() {
                const questionIndex = parseInt(this.dataset.question);
                
                if (userAnswers[questionIndex] !== undefined) {
                    return;
                }
                
                const selectedValue = this.dataset.value;
                const currentQuestion = questions[questionIndex];
                const feedbackMessage = questionCard.querySelector('.feedback-message');

                userAnswers[questionIndex] = selectedValue;

                optionButtons.forEach(btn => {
                    btn.classList.remove('selected', 'correct', 'incorrect');
                });

                this.classList.add('selected');
                
                if (selectedValue === currentQuestion.correctAnswer) {
                    this.classList.add('correct');
                    feedbackMessage.style.color = '#28a745';
                    feedbackMessage.textContent = '¬°Correcto!';
                } else {
                    this.classList.add('incorrect');
                    feedbackMessage.style.color = '#dc3545';
                    feedbackMessage.textContent = `Incorrecto. La respuesta correcta era: "${currentQuestion.correctAnswer}".`;
                }

                feedbackMessage.style.display = 'block';
                questionCard.classList.add('answered-blue-border');
                
                optionButtons.forEach(btn => {
                    btn.style.pointerEvents = 'none';
                    btn.style.opacity = '0.8';
                    btn.style.cursor = 'not-allowed';
                });
                
                const lockMessage = document.createElement('div');
                lockMessage.style.cssText = 'font-size: 0.8em; color: #666; margin-top: 8px; font-style: italic;';
                lockMessage.textContent = 'üîí Respuesta registrada - No se puede modificar';
                feedbackMessage.appendChild(lockMessage);

                if (Object.keys(userAnswers).length === questions.length) {
                    const submitQuizBtn = document.getElementById('submit-quiz-btn');
                    if (submitQuizBtn) {
                        submitQuizBtn.style.display = 'block';
                    }
                    
                    // Mostrar mensaje sutil si la funci√≥n existe
                    if (typeof showSubtleMessage === 'function') {
                        showSubtleMessage('¬°Todas las preguntas respondidas! Puedes enviar tu examen.');
                    } else if (typeof window.showSubtleMessage === 'function') {
                        window.showSubtleMessage('¬°Todas las preguntas respondidas! Puedes enviar tu examen.');
                    }
                }
            });
        });
    });

    console.log("Categorized quiz questions displayed.");
}

function getCategoryBadge(category) {
    const categoryColors = {
        "CONOCIMIENTOS LEGALES": "bg-legal",
        "PRIMEROS AUXILIOS": "bg-primeros-auxilios", 
        "PROTECCI√ìN DE INSTALACIONES": "bg-proteccion",
        "CONOCIMIENTOS DE SISTEMAS DE ALARMA": "bg-sistemas-alarma",
        "VALORES Y √âTICA": "bg-etica",
        "SISTEMAS DE COMUNICACI√ìN Y ENLACE": "bg-comunicacion",
        "PREVENCI√ìN Y CONTROL DE EMERGENCIA": "bg-emergencias",
        "PREGUNTAS ADICIONALES": "bg-purple"
    };
    
    const colorClass = categoryColors[category] || "bg-secondary";
    const categoryShort = getCategoryShortName(category);
    
    return `<span class="badge ${colorClass} category-badge">${categoryShort}</span>`;
}

function getCategoryShortName(category) {
    const shortNames = {
        "CONOCIMIENTOS LEGALES": "Legal\n\n",
        "PRIMEROS AUXILIOS": "Primeros Auxilios\n\n",
        "PROTECCI√ìN DE INSTALACIONES": "Protecci√≥n\n\n",
        "CONOCIMIENTOS DE SISTEMAS DE ALARMA": "Sistemas Alarma\n\n",
        "VALORES Y √âTICA": "√âtica",
        "SISTEMAS DE COMUNICACI√ìN Y ENLACE": "Comunicaci√≥n\n\n",
        "PREVENCI√ìN Y CONTROL DE EMERGENCIA": "Emergencias\n\n",
        "PREGUNTAS ADICIONALES": "Adicionales"
    };
    
    return shortNames[category] || category;
}

// FUNCI√ìN PRINCIPAL CORREGIDA: Env√≠a el quiz categorizado
function submitCategorizedQuiz() {
    let score = 0;
    questions.forEach((q, index) => {
        if (userAnswers[index] === q.correctAnswer) {
            score++;
        }
    });

    const maxScore = questions.length;
    const percentage = (score / maxScore) * 100;
    const grade = calculateGrade(percentage);
    const passed = grade >= 4.0;
    
    const categoryStats = showCategoryStats(questions, userAnswers);

    // Buscar elementos del modal
    const modal = document.getElementById('results-modal-overlay');
    const modalCorrectCount = document.getElementById('modal-correct-count');
    const modalTotalQuestions = document.getElementById('modal-total-questions');
    const modalPercentage = document.getElementById('modal-percentage');
    const modalGrade = document.getElementById('modal-grade');
    const modalMessage = document.getElementById('modal-message');
    const resultsModalContent = document.getElementById('results-modal-content');

    if (!modal || !modalCorrectCount || !modalTotalQuestions || !modalPercentage || !modalGrade || !modalMessage || !resultsModalContent) {
        console.error('No se encontraron todos los elementos del modal de resultados');
        // Mostrar alerta como respaldo
        alert(`Examen completado!\nRespuestas correctas: ${score}/${maxScore}\nPorcentaje: ${percentage.toFixed(1)}%\nNota: ${grade.toFixed(1)}\n${passed ? '¬°Aprobado!' : 'Reprobado'}`);
        return;
    }

    modalCorrectCount.textContent = score;
    modalTotalQuestions.textContent = maxScore;
    modalPercentage.textContent = percentage.toFixed(1);
    modalGrade.textContent = grade.toFixed(1);

    let categoryBreakdown = '<div class="category-breakdown mt-3"><h6>Resultados por Categor√≠a:</h6>';
    Object.entries(categoryStats).forEach(([category, stats]) => {
        const categoryPercentage = ((stats.correct / stats.total) * 100).toFixed(1);
        const categoryShort = getCategoryShortName(category);
        const statusIcon = stats.correct === stats.total ? '‚úÖ' : 
                          categoryPercentage >= 60 ? '‚ö†Ô∏è' : '‚ùå';
        
        categoryBreakdown += `
            <div class="category-stat">
                ${statusIcon} <strong>${categoryShort}:</strong> ${stats.correct}/${stats.total} (${categoryPercentage}%)
            </div>
        `;
    });
    categoryBreakdown += '</div>';

    resultsModalContent.classList.remove('pass', 'fail');
    if (passed) {
        modalMessage.innerHTML = '¬°Felicitaciones! Has aprobado.' + categoryBreakdown;
        resultsModalContent.classList.add('pass');
    } else {
        modalMessage.innerHTML = 'Necesitas repasar m√°s. ¬°No te desanimes!' + categoryBreakdown;
        resultsModalContent.classList.add('fail');
    }

    modal.classList.add('show');
    modal.style.display = 'flex';

    const submitQuizBtn = document.getElementById('submit-quiz-btn');
    if (submitQuizBtn) {
        submitQuizBtn.style.display = 'none';
    }
    
    document.querySelectorAll('.option-button').forEach(button => {
        button.style.pointerEvents = 'none';
        button.style.opacity = '0.7';
    });

    console.log("Categorized quiz submitted and results displayed in modal. Score:", score);

    return {
        date: new Date().toLocaleDateString('es-CL'),
        score: score,
        maxScore: maxScore,
        percentage: percentage,
        grade: grade
    };
}

function calculateGrade(percentage) {
    if (percentage < 60) return 1.0 + (percentage / 60) * 2.9;
    return 4.0 + ((percentage - 60) / 40) * 3.0;
}
